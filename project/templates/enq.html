{% extends 'index.html' %}
{% load crispy_forms_tags %}
{% block title %} Enquiry Form {% endblock %}
{% block css %}{% endblock %}

{% block body %}
<div class="main">
    <div class="row">
        <div class="col-md-12">
            <div class="well well-sm">
                <form method="POST" novalidate>
                {% csrf_token %}
                    <fieldset>
                        <legend class="text-xs-center header">Enquiry</legend>
                        <div class="form-row">
                            <div class="form-group col-md-4">
                                <span style='margin-right: 1.25em' class = "label label-default">Date: </span>
                                {{ form.edate|as_crispy_field }}
                            </div>
                            <div class="form-group col-md-4">
                                <label style='margin-right: 1.25em' class="form-check-label">  EnquiryID: {{ form.enqid|as_crispy_field }} </label>
                            </div>
                            <div class="form-group col-md-4">
                                <label style='margin-right: 1.25em' class="form-check-label">EnquiryAlias: {{ form.enqalias|as_crispy_field }} </label>
                            </div>
                        </div>
                        <br>
                        <div class="form-group">
                            {{ form.fname|as_crispy_field }}
                        </div>
                        <div class="form-group">
                           {{ form.lname|as_crispy_field }}
                        </div>
                        <div class="form-group">
                            {{ form.email|as_crispy_field }}
                        </div>
                        <div class="form-group">
                            {{ form.phone|as_crispy_field }}
                        </div>
                        <div class="form-group">
                            {{ form.Address|as_crispy_field }}
                        </div>
                        <div class="form-group">
                            <span style='margin-right: 6.25em' class = "label label-default">Courses Interested: </span>
                            {% for checkbox in form.courses %}
                                {{ checkbox.tag }}
                                <label style='margin-right: 2.25em' >{{ checkbox.choice_label }}</label>
                            {% endfor %}
                        </div>
                        <div class="form-group">
                            <span style='margin-right: 8.00em' class = "label label-default">Enquiry Source: </span>
                            {% for radio in form.enquiry %}
                                {{ radio.tag }} 
                                <label style='margin-right: 2.25em'>{{ radio.choice_label }}</label>
                            {% endfor %}
                        </div>
                        <fieldset class="form-group" id="referenceName" style="display: none">
                            <div class="row">
                                <legend class="col-md-2 col-form-label pt-0">Reference Name</legend>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        {{ form.reference_name|as_crispy_field }}
                                    </div>
                                </div>
                            </div>
                        </fieldset>  
                        <div class="form-group">
                            <span style='margin-right: 12.00em' class = "label label-default">Status: </span>
                            {% for radio in form.status %}
                                {{ radio.tag }} 
                                <label style='margin-right: 2.25em'>{{ radio.choice_label }}</label>
                            {% endfor %}
                        </div>
                        <fieldset class="form-group" id="studentdetails" style="display: none">
                            <div class="row">
                                <legend class="col-md-3 col-form-label pt-0">Student Details</legend>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        {{ form.collagename|as_crispy_field }}
                                    </div>
                                    <div class="form-group">
                                        {{ form.stream|as_crispy_field }}
                                    </div>
                                    <div class="form-group">
                                        <span style='margin-right: 12.00em' class = "label label-default">Year: </span>
                                        {% for radio in form.year %}
                                            {{ radio.tag }} 
                                            <label style='margin-right: 5.25em'>{{ radio.choice_label }}</label>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                        <fieldset class="form-group" id="employeedetails" style="display: none">
                            <div class="row">
                                <legend class="col-md-3 col-form-label pt-0">Employee Details</legend>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        {{ form.company|as_crispy_field }}
                                    </div>
                                    <div class="form-group">
                                        {{ form.designation|as_crispy_field }}
                                    </div>
                                    <div class="form-group">
                                        {{ form.year_exper|as_crispy_field }}
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                        <div class="form-group">  
                            <span style='margin-right: 5.50em' class = "label label-default">Preferred Date/Time: </span>
                            {% for radio in form.Preferred_day %}
                                {{ radio.tag }} 
                                <label style='margin-right: 4.50em'>{{ radio.choice_label }}</label>
                            {% endfor %}
                        </div>
                        <fieldset class="form-group" id="weekdaystime" style="display: none">
                            <div class="row">
                                <legend class="col-md-2 col-form-label pt-0">Preferred Date & Time</legend>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        {{ form.weekday_date|as_crispy_field }}
                                    </div>
                                    <div class="form-group">
                                        {{ form.weekdays_time|as_crispy_field }}
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                        <fieldset class="form-group" id="weekendtime" style="display: none">
                            <div class="row">
                                <legend class="col-md-2 col-form-label pt-0">Preferred Date & Time</legend>
                                <div class="col-md-9">
                                    <div class="form-group">
                                        {{ form.weekend_date|as_crispy_field }}
                                    </div>
                                    <div class="form-group">
                                        {{ form.weekend_time|as_crispy_field }}
                                    </div>
                                </div>
                            </div>
                        </fieldset>
                        <br>
                        <div class="form-group">
                            {{ form.comments|as_crispy_field }}
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary btn-lg">Submit</button>
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
    </div> 
</div>    
{% endblock %}
{% block js%}
<script>

console.log('working');
console.log('clicked');
const enqalias = document.getElementById("enqalias");
const fname = document.getElementById("fname");

const lname = document.getElementById("lname");
const enqid = document.getElementById("enqid").value;
console.log(enqid);
email.addEventListener("focus", function(){
    const fnameCap = fname.value.charAt(0).toUpperCase() + fname.value.slice(1)
    const lnameCap = lname.value.charAt(0).toUpperCase() + lname.value.slice(1)
    enqalias.value = "E-"+" "+fnameCap+"_"+lnameCap.slice(0, 2) + enqid;
    name = enqalias.textContent;
    console.log(name);
});



function ShowHideDiv() {
        var ref = document.getElementById("id_enquiry_2");
        var stud = document.getElementById("id_status_0");
        var emp = document.getElementById("id_status_1");
        var days = document.getElementById("id_Preferred_day_0");
        var end = document.getElementById("id_Preferred_day_1");        
     
        var reftrue = document.getElementById("referenceName");
        var studtrue = document.getElementById("studentdetails");
        var emptrue = document.getElementById("employeedetails");
        var daystrue = document.getElementById("weekdaystime");
        var endtrue = document.getElementById("weekendtime");
        
        reftrue.style.display = ref.checked ? "block" : "none";
        studtrue.style.display = stud.checked ? "block" : "none";
        emptrue.style.display = emp.checked ? "block" : "none";
        daystrue.style.display = days.checked ? "block" : "none";
        endtrue.style.display = end.checked ? "block" : "none";
    }

{% if thank %}
alert('Thanks for Registration. We will get back to you soon!');
document.location = "/enq/";
{% endif %}

</script>
 
{% endblock %} 

